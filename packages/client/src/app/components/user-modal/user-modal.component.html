<div
  class="flex flex-col gap-4 bg-slate-900 w-[400px] text-white p-8 rounded-sm"
>
  <div class="flex flex-col gap-2">
    <h2 class="text-lg font-semibold">Edit Name ({{ authUser?.name }})</h2>
  </div>

  <form class="flex flex-col gap-2">
    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label class="text-gray-300">Name</mat-label>
      <input
        class="text-gray-300"
        matInput
        [formControl]="getControl('name')"
      />
      @if (hasError('name', 'required')) {
        <mat-error class="text-red-600">Name is required</mat-error>
      }
      @if (hasError('name', 'minlength') || hasError('name', 'maxlength')) {
        <mat-error class="text-red-600"
          >Name must be between 3 and 255</mat-error
        >
      }
    </mat-form-field>
    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label class="text-gray-300">Email</mat-label>
      <input
        type="email"
        autocomplete="email"
        class="text-gray-300"
        matInput
        [formControl]="getControl('email')"
      />
      @if (hasError('email', 'required')) {
        <mat-error class="text-red-600">Email is required</mat-error>
      }
      @if (hasError('email', 'email')) {
        <mat-error class="text-red-600">Email must be a valid email</mat-error>
      }
    </mat-form-field>
    <div class="bg-gray-600 h-px w-full mb-4"></div>
    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label class="text-gray-300">Current password</mat-label>
      <input
        autocomplete="current-password"
        type="password"
        class="text-gray-300"
        matInput
        [formControl]="getControl('currentPassword')"
      />
      @if (hasError('currentPassword', 'required')) {
        <mat-error class="text-red-600">Current password is required</mat-error>
      }
      @if (
        hasError('currentPassword', 'minlength') ||
        hasError('currentPassword', 'maxlength')
      ) {
        <mat-error class="text-red-600"
          >Current password must be between 8 and 255</mat-error
        >
      }
    </mat-form-field>
    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label class="text-gray-300">New password</mat-label>
      <input
        type="password"
        class="text-gray-300"
        matInput
        [formControl]="getControl('password')"
      />
      @if (hasError('password', 'required')) {
        <mat-error class="text-red-600">New password is required</mat-error>
      }

      @if (
        hasError('password', 'minlength') || hasError('password', 'maxlength')
      ) {
        <mat-error class="text-red-600"
          >New password must be between 8 and 255</mat-error
        >
      } @else if (hasError('password', 'pattern')) {
        <mat-error class="text-red-600">
          Must contain: Upper, lower, digit, special
        </mat-error>
      }
    </mat-form-field>
    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label class="text-gray-300">Confirm new password</mat-label>
      <input
        type="password"
        class="text-gray-300"
        matInput
        [formControl]="getControl('passwordConfirmation')"
      />
      @if (hasError('passwordConfirmation', 'required')) {
        <mat-error class="text-red-600">Confirm password is required</mat-error>
      }
      @if (hasError('passwordConfirmation', 'mismatch')) {
        <mat-error class="text-red-600">Passwords must match</mat-error>
      }
    </mat-form-field>
  </form>
  <button
    type="button"
    class="bg-blue-600 text-white font-semibold py-2 rounded-lg disabled:bg-gray-600/50 disabled:cursor-not-allowed"
    [disabled]="!userForm.valid || userForm.pristine || isLoading()"
    (click)="submit()"
  >
    Update yourself!
  </button>
</div>
